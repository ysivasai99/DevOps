pipeline{
    agent any
	environment{
    PATH= "/var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven/bin:$PATH"
  }
  stages{
      stage("Git clone"){
	      steps{
		      git branch: 'main', credentialsId: '239d4862-6e5b-432e-99ec-e2fceeaccf27', url: 'https://github.com/ysivasai99/DevOps.git'
			  }
		}
	  stage("Maven build"){
	      steps{
		     sh "mvn -f /var/lib/jenkins/workspace/Pipeline_GSTN/Maven/webpage_feture/pom.xml clean sonar:sonar package"
			 }
			 }
	  stage("Nexus Artifacts upload"){
	      steps{
		      nexusArtifactUploader artifacts: [[artifactId: 'webpage_feture', classifier: '', file: '/var/lib/jenkins/workspace/Pipeline_GSTN/Maven/webpage_feture/target/webpage_feture.war', type: 'war']], credentialsId: 'Nexus3', groupId: 'sample_project', nexusUrl: '54.212.0.252', nexusVersion: 'nexus3', protocol: 'http', repository: 'nexus_rel_new', version: 'snap'
			  }
			  }
	}
}
		
	      
